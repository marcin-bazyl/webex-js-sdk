import {MEETINGS} from '../constants';

/**
 * @class MembersCollection
 */
export default class MembersCollection {
  namespace = MEETINGS;

  /**
   * @param {Object} locus
   * @memberof Members
   */
  constructor() {
    this.members = {};
  }

  set(id, member) {
    this.members[id] = member;
  }

  setAll(members) {
    this.members = members;
  }

  /**
   * @param {String} id
   * @returns {Member}
   */
  get(id) {
    return this.members[id];
  }

  /**
   * @returns {Object} returns an object map of Member instances
   * @memberof MembersCollection
   */
  getAll() {
    return this.members;
  }

  /** Finds a member that has any device with a csi mathing provided value
   *
   * @param {number} csi
   * @returns {Member}
   */
  findMemberByCsi(csi) {
    return Object.values(this.members)
      .find((member) => (
        member.participant?.devices?.find((device) => (
          device.csis.find((memberCsi) => memberCsi === csi)))));
  }
}
